<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Control Bandar - FANZZ777</title>
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/menu.css">
</head>
<body>

<header class="header gold">
  <div class="logo">FANZZ777 - Control Bandar</div>
</header>

<main class="content">
  <h2>Login Bandar</h2>
  <input type="text" id="bandarUsername" placeholder="Username Bandar">
  <input type="password" id="bandarPassword" placeholder="Password Bandar">
  <button onclick="loginBandar()">Login</button>

  <section id="bandarPanel" style="display:none;">
    <h3>Daftar Pemain</h3>
    <table border="1" cellpadding="5">
      <thead>
        <tr>
          <th>Username</th>
          <th>Email</th>
          <th>E-wallet / Bank</th>
          <th>Saldo</th>
          <th>ACC Deposit/Withdraw</th>
        </tr>
      </thead>
      <tbody id="playersTable"></tbody>
    </table>
  </section>
</main>

<script>
const bandarCred = {username:"admin", password:"admin123"};

function loginBandar(){
  const u = document.getElementById("bandarUsername").value;
  const p = document.getElementById("bandarPassword").value;
  if(u===bandarCred.username && p===bandarCred.password){
    alert("Login Bandar Berhasil!");
    document.getElementById("bandarPanel").style.display="block";
    loadPlayers();
  } else alert("Username / Password salah!");
}

function loadPlayers(){
  const users = JSON.parse(localStorage.getItem("users") || "[]");
  const tbody = document.getElementById("playersTable");
  tbody.innerHTML="";
  users.forEach((u,i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML=`
      <td>${u.username}</td>
      <td>${u.email}</td>
      <td>${u.ewallet}(${u.ewalletNo}) / ${u.bank}(${u.bankNo})</td>
      <td>${u.saldo||0}</td>
      <td>
        <select onchange="updateAcc(${i},this.value)">
          <option value="pending" ${!u.acc?"selected":""}>Pending</option>
          <option value="approved" ${u.acc?"selected":""}>Approved</option>
        </select>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

function updateAcc(index,value){
  const users = JSON.parse(localStorage.getItem("users") || "[]");
  users[index].acc = value==="approved";
  localStorage.setItem("users", JSON.stringify(users));
}
</script>
</body>
</html>

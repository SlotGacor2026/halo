<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel Bandar</title>

<style>
body{
  background:#000;
  color:gold;
  font-family:Arial;
  margin:0;
  padding:15px;
}
h2{text-align:center}

input,button{
  padding:8px;
  margin:5px 0;
  border-radius:6px;
  border:none;
}
button{font-weight:bold;cursor:pointer}
.acc{background:lime;color:#000}
.tolak{background:red;color:#fff}
.logout{background:orange}

.box{
  background:#111;
  border:1px solid gold;
  border-radius:10px;
  padding:10px;
  margin-bottom:15px;
}

.hidden{display:none}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox" class="box">
  <h2>üîê LOGIN BANDAR</h2>
  <input type="password" id="adminPass" placeholder="Password Bandar">
  <button onclick="login()">Masuk</button>
</div>

<!-- PANEL -->
<div id="panel" class="hidden">
  <h2>üìä PANEL BANDAR</h2>
  <button class="logout" onclick="logout()">Logout</button>
  <div id="playerList"></div>
</div>

<script>
const DEFAULT_PASS="bandar123";

function login(){
 let saved=localStorage.adminPass||DEFAULT_PASS;
 if(adminPass.value!==saved) return alert("Password salah");
 localStorage.adminLogin=1;
 location.reload();
}

function logout(){
 localStorage.removeItem("adminLogin");
 location.reload();
}

function loadPlayers(){
 let data=JSON.parse(localStorage.players||"[]");
 playerList.innerHTML="";
 data.forEach(p=>{
  let box=document.createElement("div");
  box.className="box";

  let acc=p.wallet?p.wallet+" "+p.walletNum:p.bank+" "+p.bankNum;

  box.innerHTML=`
   <b>Username:</b> ${p.username}<br>
   <b>Nama Rekening:</b> ${p.name}<br>
   <b>Rekening:</b> ${acc}<br>
   <b>Saldo:</b> ${p.saldo}<br><br>
   <b>Transaksi:</b>
   <ul>
     ${p.history.map((h,i)=>`
       <li>
        ${h.type.toUpperCase()} - ${h.amount} (${h.status})
        ${h.status==="pending"?`
         <br>
         <button class="acc" onclick="acc('${p.username}',${i})">ACC</button>
         <button class="tolak" onclick="tolak('${p.username}',${i})">TOLAK</button>
        `:""}
       </li>
     `).join("")}
   </ul>
  `;
  playerList.appendChild(box);
 });
}

function acc(user,i){
 let d=JSON.parse(localStorage.players);
 let p=d.find(x=>x.username===user);
 let h=p.history[i];

 if(h.type==="deposit") p.saldo+=h.amount;
 if(h.type==="withdraw") p.saldo-=h.amount;

 h.status="acc";
 save(d);
}

function tolak(user,i){
 let d=JSON.parse(localStorage.players);
 let p=d.find(x=>x.username===user);
 p.history[i].status="tolak";
 save(d);
}

function save(d){
 localStorage.players=JSON.stringify(d);
 loadPlayers();
}

window.onload=()=>{
 if(localStorage.adminLogin){
  loginBox.style.display="none";
  panel.classList.remove("hidden");
  loadPlayers();
 }else{
  loginBox.style.display="block";
 }
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bandar Panel</title>
<style>
body {
  font-family: Arial, sans-serif;
  background:#000;
  color:#ffd700;
  margin:0;
}
.container {
  max-width:1000px;
  margin:auto;
  padding:20px;
}
.box {
  background:#111;
  padding:20px;
  border-radius:10px;
  box-shadow:0 0 15px #000;
}
h2 { text-align:center; }
input, select, button {
  width:100%;
  padding:10px;
  margin:5px 0;
  border-radius:5px;
  border:none;
}
button {
  background:#ffd700;
  font-weight:bold;
  cursor:pointer;
}
table {
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}
th, td {
  border:1px solid #444;
  padding:8px;
  text-align:center;
}
th { background:#222; }
.status-btn {
  padding:5px 10px;
  background:#0f0;
  border:none;
  cursor:pointer;
}
.logout {
  background:#f00;
  color:#fff;
  margin-top:10px;
}
.hidden { display:none; }
</style>
</head>

<body>
<div class="container">

<!-- LOGIN -->
<div id="loginBox" class="box">
  <h2>LOGIN BANDAR</h2>
  <input id="user" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- PANEL -->
<div id="panelBox" class="box hidden">
  <h2>CONTROL BANDAR</h2>

  <table>
    <thead>
      <tr>
        <th>Username</th>
        <th>Jenis Rekening</th>
        <th>Nama Rekening</th>
        <th>Nomor Rekening</th>
        <th>Deposit / Withdraw</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="dataPemain"></tbody>
  </table>

  <button class="logout" onclick="logout()">Logout</button>
</div>

</div>

<script>
/* ======================
   LOGIN DATA (FIX)
====================== */
const BANDAR_USER = "bandar1";
const BANDAR_PASS = "bandar123";

/* ======================
   INIT DATA PEMAIN
====================== */
if (!localStorage.getItem("pemainData")) {
  localStorage.setItem("pemainData", JSON.stringify([]));
}

/* ======================
   LOGIN
====================== */
function login() {
  const u = user.value;
  const p = pass.value;
  if (u === BANDAR_USER && p === BANDAR_PASS) {
    sessionStorage.setItem("loginBandar","true");
    showPanel();
  } else {
    alert("Login gagal!");
  }
}

function showPanel() {
  loginBox.classList.add("hidden");
  panelBox.classList.remove("hidden");
  loadPemain();
}

if (sessionStorage.getItem("loginBandar")==="true") {
  showPanel();
}

/* ======================
   LOAD PEMAIN
====================== */
function loadPemain() {
  const data = JSON.parse(localStorage.getItem("pemainData")) || [];
  dataPemain.innerHTML = "";

  data.forEach((p,i)=>{
    if (p.status === "pending") {
      dataPemain.innerHTML += `
      <tr>
        <td>${p.username}</td>
        <td>${p.jenis}</td>
        <td>${p.nama}</td>
        <td>${p.rekening}</td>
        <td>${p.tipe} (${p.jumlah})</td>
        <td>
          <button class="status-btn" onclick="acc(${i})">ACC</button>
        </td>
      </tr>`;
    }
  });
}

/* ======================
   ACC DEPO / WD
====================== */
function acc(i) {
  const data = JSON.parse(localStorage.getItem("pemainData"));
  const p = data[i];

  let saldo = Number(localStorage.getItem("saldo_"+p.username)) || 0;

  if (p.tipe === "DEPOSIT") saldo += p.jumlah;
  if (p.tipe === "WITHDRAW") saldo -= p.jumlah;

  localStorage.setItem("saldo_"+p.username, saldo);

  p.status = "done";
  data[i] = p;
  localStorage.setItem("pemainData", JSON.stringify(data));

  alert("Transaksi di-ACC");
  loadPemain();
}

/* ======================
   LOGOUT
====================== */
function logout() {
  sessionStorage.removeItem("loginBandar");
  location.reload();
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BANDAR PANEL</title>

<style>
body{
  background:#000;
  color:gold;
  font-family:Arial;
  padding:20px;
}
h2{text-align:center}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}
th,td{
  border:1px solid gold;
  padding:8px;
  text-align:center;
}
th{background:#111}
button{
  background:gold;
  border:none;
  padding:6px 10px;
  font-weight:bold;
  cursor:pointer;
}
.login{
  max-width:300px;
  margin:auto;
  background:#111;
  padding:20px;
  border-radius:10px;
}
input{
  width:100%;
  padding:8px;
  margin:6px 0;
  background:#000;
  color:gold;
  border:1px solid gold;
}
.hidden{display:none}
</style>
</head>

<body>

<div id="loginBox" class="login">
  <h2>LOGIN BANDAR</h2>
  <input id="bdUser" placeholder="Username bandar">
  <input id="bdPass" type="password" placeholder="Password">
  <button onclick="loginBandar()">Login</button>
</div>

<div id="panel" class="hidden">
  <h2>PANEL BANDAR</h2>
  <p id="roleInfo"></p>

  <table>
    <thead>
      <tr>
        <th>Username</th>
        <th>Jenis Rekening</th>
        <th>Nama Rekening</th>
        <th>Nomor Rekening</th>
        <th>Transaksi</th>
        <th>Nominal</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="dataRows"></tbody>
  </table>
</div>

<script>
// =====================
// DATA BANDAR
// =====================
const bandars = [
 {user:"admin1", pass:"12345", role:"ACC_ONLY"},
 {user:"admin2", pass:"67890", role:"VIEW_ONLY"}
];

let currentBandar=null;

// =====================
// LOGIN
// =====================
function loginBandar(){
 const u=bdUser.value,p=bdPass.value;
 const b=bandars.find(x=>x.user===u && x.pass===p);
 if(!b) return alert("Login gagal");
 currentBandar=b;
 loginBox.classList.add("hidden");
 panel.classList.remove("hidden");
 roleInfo.innerText="Role: "+b.role;
 loadData();
}

// =====================
// LOAD DATA
// =====================
function loadData(){
 const players=JSON.parse(localStorage.players||"[]");
 let rows="";
 players.forEach(pl=>{
  pl.history.forEach((h,i)=>{
   if(h.status==="PENDING"){
    rows+=`
    <tr>
      <td>${pl.username}</td>
      <td>${pl.wallet ? "E-Wallet ("+pl.wallet+")" : "Bank ("+pl.bank+")"}</td>
      <td>${pl.name}</td>
      <td>${pl.wallet ? pl.walletNum : pl.bankNum}</td>
      <td>${h.type}</td>
      <td>${h.amount}</td>
      <td>
        ${currentBandar.role==="ACC_ONLY"
        ? `<button onclick="acc('${pl.username}',${i})">ACC</button>`
        : 'VIEW'}
      </td>
    </tr>`;
   }
  });
 });
 dataRows.innerHTML=rows || "<tr><td colspan='7'>Tidak ada transaksi</td></tr>";
}

// =====================
// ACC TRANSAKSI
// =====================
function acc(username,index){
 let players=JSON.parse(localStorage.players);
 let p=players.find(x=>x.username===username);
 let trx=p.history[index];

 if(trx.type==="Deposit") p.saldo+=trx.amount;
 if(trx.type==="Withdraw") p.saldo-=trx.amount;

 trx.status="ACC";

 localStorage.players=JSON.stringify(players);
 alert("Transaksi di ACC & saldo update");
 loadData();
}
</script>

</body>
</html>

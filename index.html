<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FANZZ777</title>

<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/header.css">
<link rel="stylesheet" href="css/menu.css">
<link rel="stylesheet" href="css/animation.css">

<style>
#authModal{background:#000;color:gold;box-shadow:0 0 25px gold}
#authModal input,#authModal select{background:#000;color:gold;border:1px solid gold}
#authModal button{background:gold;color:#000;font-weight:bold}

.modal{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
background:#111;color:gold;padding:20px;border-radius:12px;width:90%;max-width:400px;
z-index:1000;box-shadow:0 0 20px gold}

.panel{display:none;background:#111;color:gold;padding:10px;border-radius:10px}

#saldoBox{
  background:#111;
  border:1px solid gold;
  padding:6px 10px;
  border-radius:8px;
  font-weight:bold;
}
</style>
</head>

<body>

<header class="header gold">
  <div class="logo">FANZZ777</div>
  <div id="saldoBox">ðŸ’° Saldo: <span id="saldo">0</span></div>
</header>

<nav class="menu">
  <button>Slot</button>
  <button>Casino</button>
  <button>Togel</button>
  <button>Arcade</button>
  <button>Developer</button>
</nav>

<main class="content">
<h2>MENU PEMAIN</h2>

<div class="actions">
  <button onclick="openDeposit()">Deposit</button>
  <button onclick="openWithdraw()">Withdraw</button>
  <button onclick="showHistory()">Histori</button>
  <button onclick="showLeaderboard()">Leaderboard</button>
  <button onclick="logoutPlayer()">Logout</button>
</div>

<!-- DEPOSIT -->
<div id="depositModal" class="modal">
<h3>Deposit</h3>
<p>Rekening kamu: <b id="depAcc"></b></p>
<input type="number" id="depositAmount" placeholder="Minimal 10.000">
<br><br>
<button onclick="submitDeposit()">Konfirmasi</button>
<button onclick="closeAll()">Batal</button>
</div>

<!-- WITHDRAW -->
<div id="withdrawModal" class="modal">
<h3>Withdraw</h3>
<p>Rekening kamu: <b id="wdAcc"></b></p>
<input type="number" id="withdrawAmount" placeholder="Minimal 50.000">
<br><br>
<button onclick="submitWithdraw()">Konfirmasi</button>
<button onclick="closeAll()">Batal</button>
</div>

<div id="historyPanel" class="panel"><ul id="historyList"></ul></div>
<div id="leaderboardPanel" class="panel"><ul id="leaderboardList"></ul></div>

<!-- AUTH -->
<div id="authModal" class="modal">
<h3>Login / Daftar</h3>
<input id="regUsername" placeholder="Username">
<input id="regPassword" type="password" placeholder="Password">
<input id="regConfirm" type="password" placeholder="Konfirmasi Password">
<input id="regEmail" placeholder="Email">
<input id="regName" placeholder="Nama Rekening">

<select id="regWallet">
<option value="">Pilih E-Wallet</option>
<option>DANA</option><option>GOPAY</option><option>OVO</option>
</select>
<input id="regWalletNum" placeholder="Nomor E-Wallet">

<select id="regBank">
<option value="">Pilih Bank</option>
<option>BRI</option><option>BCA</option><option>BNI</option>
</select>
<input id="regBankNum" placeholder="Nomor Bank">

<button onclick="registerPlayer()">Daftar</button>
</div>

<script>
function registerPlayer(){
 let u=regUsername.value,p=regPassword.value,c=regConfirm.value;
 let n=regName.value;
 if(!u||!p||p!==c||!n) return alert("Data tidak lengkap");

 let d=JSON.parse(localStorage.players||"[]");
 if(d.find(x=>x.username===u)) return alert("Username dipakai");

 let pl={
  username:u,password:p,name:n,
  wallet:regWallet.value,walletNum:regWalletNum.value,
  bank:regBank.value,bankNum:regBankNum.value,
  saldo:0,history:[]
 };
 d.push(pl);
 localStorage.players=JSON.stringify(d);
 localStorage.loginUser=u;
 location.reload();
}

function getPlayer(){
 let u=localStorage.loginUser;
 let d=JSON.parse(localStorage.players||"[]");
 return d.find(x=>x.username===u);
}

function syncSaldo(){
 let p=getPlayer();
 if(p) saldo.innerText=p.saldo;
}

function openDeposit(){
 let p=getPlayer();
 depAcc.innerText=p.wallet?p.wallet+" "+p.walletNum:p.bank+" "+p.bankNum;
 depositModal.style.display="block";
}

function openWithdraw(){
 let p=getPlayer();
 wdAcc.innerText=p.wallet?p.wallet+" "+p.walletNum:p.bank+" "+p.bankNum;
 withdrawModal.style.display="block";
}

function submitDeposit(){
 let amt=+depositAmount.value;
 if(amt<10000) return alert("Minimal 10.000");
 let p=getPlayer();
 p.history.push({
  type:"deposit",
  amount:amt,
  status:"pending",
  method:p.wallet||p.bank,
  number:p.walletNum||p.bankNum,
  date:new Date().toISOString().slice(0,10)
 });
 save(p);
 alert("Menunggu ACC bandar");
 closeAll();
}

function submitWithdraw(){
 let amt=+withdrawAmount.value;
 if(amt<50000||amt>getPlayer().saldo) return alert("Saldo tidak cukup");
 let p=getPlayer();
 p.history.push({
  type:"withdraw",
  amount:amt,
  status:"pending",
  method:p.wallet||p.bank,
  number:p.walletNum||p.bankNum,
  date:new Date().toISOString().slice(0,10)
 });
 save(p);
 alert("Menunggu ACC bandar");
 closeAll();
}

function showHistory(){
 let p=getPlayer();
 historyPanel.style.display="block";
 historyList.innerHTML=p.history.map(h=>
  `<li>${h.type} ${h.amount} (${h.status})</li>`
 ).join("");
}

function showLeaderboard(){
 let d=JSON.parse(localStorage.players||"[]");
 leaderboardPanel.style.display="block";
 leaderboardList.innerHTML=d.sort((a,b)=>b.saldo-a.saldo)
 .map(x=>`<li>${x.username} : ${x.saldo}</li>`).join("");
}

function save(p){
 let d=JSON.parse(localStorage.players);
 d=d.map(x=>x.username===p.username?p:x);
 localStorage.players=JSON.stringify(d);
 syncSaldo();
}

function closeAll(){
 depositModal.style.display=withdrawModal.style.display="none";
}

function logoutPlayer(){
 localStorage.removeItem("loginUser");
 location.reload();
}

window.onload=()=>{
 if(!localStorage.loginUser) authModal.style.display="block";
 syncSaldo();
 setInterval(syncSaldo,2000); // auto update dari ACC bandar
}
</script>
</body>
  </html>

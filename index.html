<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FANZZ777</title>

<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/header.css">
<link rel="stylesheet" href="css/menu.css">
<link rel="stylesheet" href="css/animation.css">

<style>
#authModal{
  background:linear-gradient(145deg,#000,#1a1a1a);
  color:gold;
  box-shadow:0 0 25px gold;
}
#authModal input,#authModal select{
  background:#000;color:gold;border:1px solid gold;
}
#authModal button{background:gold;color:#000;font-weight:bold}

.modal{
  display:none;position:fixed;top:50%;left:50%;
  transform:translate(-50%,-50%);
  background:#111;color:gold;
  padding:20px;border-radius:12px;
  width:90%;max-width:400px;
  box-shadow:0 0 20px gold;
  z-index:1000;
}
.panel{display:none;background:#111;color:gold;padding:10px;border-radius:10px}

#saldoBox{
  background:#111;
  border:1px solid gold;
  padding:10px;
  border-radius:10px;
  margin-bottom:15px;
  text-align:center;
}

#waButton{
  position:fixed;bottom:20px;left:20px;width:60px;
  animation:pulse 1.5s infinite
}
#waButton img{width:100%}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
</style>
</head>

<body>

<header class="header gold">
  <div class="logo">FANZZ777</div>
</header>

<nav class="menu">
  <button onclick="goPage('slot.html')">Slot</button>
  <button onclick="goPage('casino.html')">Casino</button>
  <button onclick="goPage('togel.html')">Togel</button>
  <button onclick="goPage('arcade.html')">Arcade</button>
  <button onclick="goPage('poker.html')">Poker</button>
  <button onclick="goPage('developer.html')">Developer</button>
</nav>

<section class="banner">
  <div class="banner-slider">
    <img src="assets/banners/banner_main.jpg">
    <img src="assets/banners/banner_pgsoft.jpg">
    <img src="assets/banners/banner_pragmatic.jpg">
    <img src="assets/banners/banner_TopUp.jpg">
    <img src="assets/banners/banner_jualbeli.jpg">
    <img src="assets/banners/banner_saya.jpg">
    <img src="assets/banners/banner_teman.jpg">
  </div>
</section>

<main class="content">
<h2>MENU ðŸ’°</h2>

<div id="saldoBox">
  <b>Saldo Kamu:</b>
  <h2 id="saldoText">0</h2>
</div>

<div class="actions">
  <button onclick="openDeposit()">Deposit</button>
  <button onclick="openWithdraw()">Withdraw</button>
  <button onclick="showHistory()">Histori</button>
  <button onclick="showLeaderboard()">Leaderboard</button>
  <button onclick="logoutPlayer()">Logout</button>
</div>

<!-- DEPOSIT -->
<div id="depositModal" class="modal">
<h3>Deposit</h3>
<p>Rekening kamu: <b id="depAcc"></b></p>
<input type="number" id="depositAmount" placeholder="Minimal 10.000">
<p>Nomor Tujuan:</p>
<img src="assets/qris/qris_main.jpg" width="150">
<br><br>
<button onclick="submitDeposit()">Konfirmasi</button>
<button onclick="closeAll()">Batal</button>
</div>

<!-- WITHDRAW -->
<div id="withdrawModal" class="modal">
<h3>Withdraw</h3>
<p>Rekening kamu: <b id="wdAcc"></b></p>
<input type="number" id="withdrawAmount" placeholder="Minimal 50.000">
<br><br>
<button onclick="submitWithdraw()">Konfirmasi</button>
<button onclick="closeAll()">Batal</button>
</div>

<div id="historyPanel" class="panel">
  <ul id="historyList"></ul>
</div>

<div id="leaderboardPanel" class="panel">
  <ul id="leaderboardList"></ul>
</div>
</main>

<div id="authModal" class="modal">

<div id="authChoice">
<h3>Pilih Menu</h3>
<button onclick="showLogin()">Login</button>
<button onclick="showRegister()">Daftar</button>
</div>

<div id="loginForm" style="display:none;">
<h3>Login</h3>
<input id="loginUsername" placeholder="Username">
<input id="loginPassword" type="password" placeholder="Password">
<button onclick="loginPlayer()">Masuk</button>
<button onclick="backChoice()">Kembali</button>
</div>

<div id="registerForm" style="display:none;">
<h3>Daftar</h3>
<input id="regUsername" placeholder="Username">
<input id="regPassword" type="password" placeholder="Password">
<input id="regConfirm" type="password" placeholder="Konfirmasi Password">
<input id="regEmail" placeholder="Email">

<b>Nama Rekening</b>
<input id="regName" placeholder="Nama Pemilik Rekening">

<select id="regWallet">
<option value="">Pilih E-Wallet</option>
<option>DANA</option>
<option>GOPAY</option>
<option>OVO</option>
<option>SHOPEEPAY</option>
<option>LINKAJA</option>
</select>
<input id="regWalletNum" placeholder="Nomor E-Wallet">

<select id="regBank">
<option value="">Pilih Bank</option>
<option>BCA</option>
<option>BRI</option>
<option>BNI</option>
<option>MANDIRI</option>
<option>CIMB</option>
</select>
<input id="regBankNum" placeholder="Nomor Bank">

<button onclick="registerPlayer()">Konfirmasi</button>
<button onclick="backChoice()">Kembali</button>
</div>

</div>

<a id="waButton" href="https://wa.me/6289618602130" target="_blank">
<img src="assets/icons/whatsapp.png">
</a>

<script>
function getPlayer(){
 return JSON.parse(localStorage.current||"null");
}

function savePlayer(p){
 let d=JSON.parse(localStorage.players||"[]");
 d=d.map(x=>x.username===p.username?p:x);
 localStorage.players=JSON.stringify(d);
 localStorage.current=JSON.stringify(p);
 updateSaldo();
}

function updateSaldo(){
 let p=getPlayer();
 if(p) saldoText.innerText=p.saldo;
}

function registerPlayer(){
 const u=regUsername.value,pw=regPassword.value,c=regConfirm.value;
 const e=regEmail.value,n=regName.value;
 const w=regWallet.value,wn=regWalletNum.value;
 const b=regBank.value,bn=regBankNum.value;

 if(!u||!pw||!c||!e||!n||(!w&&!b)) return alert("Lengkapi data");
 if(pw!==c) return alert("Password beda");

 let d=JSON.parse(localStorage.players||"[]");
 if(d.find(x=>x.username===u)) return alert("Username dipakai");

 let pl={
  username:u,password:pw,email:e,name:n,
  wallet:w,walletNum:wn,
  bank:b,bankNum:bn,
  saldo:0,
  history:[]
 };
 d.push(pl);
 localStorage.players=JSON.stringify(d);
 localStorage.current=JSON.stringify(pl);
 location.reload();
}

function openDeposit(){
 let p=getPlayer();
 depAcc.innerText=p.wallet?p.wallet+" - "+p.walletNum:p.bank+" - "+p.bankNum;
 depositModal.style.display="block";
}

function openWithdraw(){
 let p=getPlayer();
 wdAcc.innerText=p.wallet?p.wallet+" - "+p.walletNum:p.bank+" - "+p.bankNum;
 withdrawModal.style.display="block";
}

function closeAll(){
 depositModal.style.display=withdrawModal.style.display="none";
}

function submitDeposit(){
 let amt=+depositAmount.value;
 if(amt<10000) return alert("Minimal 10.000");

 let p=getPlayer();

 // SIMPAN KE HISTORY PLAYER
 p.history.push({type:"Deposit",amount:amt,status:"PENDING"});
 savePlayer(p);

 // KIRIM KE BANDAR
 let data = JSON.parse(localStorage.getItem("pemainData")) || [];

 data.push({
   username:p.username,
   jenis: p.wallet ? "E-Wallet" : "Bank",
   provider: p.wallet ? p.wallet : p.bank,
   nama: p.name,
   rekening: p.wallet ? p.walletNum : p.bankNum,
   tipe:"DEPOSIT",
   jumlah:amt,
   status:"pending"
 });

 localStorage.setItem("pemainData", JSON.stringify(data));

 alert("PROSES KONTOL!!");
 closeAll();
  }

function submitWithdraw(){
 let amt=+withdrawAmount.value;
 if(amt<50000) return alert("Minimal 50.000");

 let p=getPlayer();

 p.history.push({type:"Withdraw",amount:amt,status:"PENDING"});
 savePlayer(p);

 let data = JSON.parse(localStorage.getItem("pemainData")) || [];

 data.push({
   username:p.username,
   jenis: p.wallet ? "E-Wallet" : "Bank",
   provider: p.wallet ? p.wallet : p.bank,
   nama: p.name,
   rekening: p.wallet ? p.walletNum : p.bankNum,
   tipe:"WITHDRAW",
   jumlah:amt,
   status:"pending"
 });

 localStorage.setItem("pemainData", JSON.stringify(data));

 alert("PROSES KONTOL!!!");
 closeAll();
  }

function showHistory(){
 let p=getPlayer();
 historyPanel.style.display="block";
 historyList.innerHTML=p.history.map(h=>
  `<li>${h.type} ${h.amount} - ${h.status}</li>`
 ).join("");
}

function showLeaderboard(){
 let d=JSON.parse(localStorage.players||"[]");
 leaderboardPanel.style.display="block";
 leaderboardList.innerHTML=d
 .sort((a,b)=>b.saldo-a.saldo)
 .map(x=>`<li>${x.username} : ${x.saldo}</li>`).join("");
}

function logoutPlayer(){
 localStorage.removeItem("current");
 location.reload();
}

  function showLogin(){
  authChoice.style.display="none";
  loginForm.style.display="block";
}

function showRegister(){
  authChoice.style.display="none";
  registerForm.style.display="block";
}

function backChoice(){
  loginForm.style.display="none";
  registerForm.style.display="none";
  authChoice.style.display="block";
}

function loginPlayer(){
  const u = loginUsername.value;
  const pw = loginPassword.value;

  let players = JSON.parse(localStorage.players||"[]");

  let user = players.find(x=>x.username===u && x.password===pw);

  if(!user) return alert("Username / Password salah!");

  localStorage.current = JSON.stringify(user);
  location.reload();
}

window.onload=()=>{
 let p=getPlayer();
 if(!p){
   authModal.style.display="block";
   authChoice.style.display="block";
   loginForm.style.display="none";
   registerForm.style.display="none";
 } else {
   updateSaldo();
 }
}

function goPage(page){
  window.location.href = "pages/" + page;
}
</script>
</body>
                          </html>
